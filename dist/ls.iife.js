var $ls=function(c){"use strict";const f=r=>{if(typeof r!="string"||!r)throw new TypeError("Input must be a string and cannot be empty!");const n=Math.floor(Math.random()*256),t=r.length,e=new Uint16Array(t+1);for(let a=0;a<=t;a++)e[a]=r.charCodeAt(a)^n;e[t]=n;const l=new Uint8Array(e.buffer),s=String.fromCharCode(...l);return btoa(s)},i=r=>{if(typeof r!="string"||!r)throw new TypeError("Input must be a string and cannot be empty!");const n=atob(r),t=new Uint8Array(n.length);for(let a=0;a<t.length;a++)t[a]=n.charCodeAt(a);const e=new Uint16Array(t.buffer),l=e.length-1,s=new Array(l);for(let a=0;a<l;a++)s[a]=String.fromCharCode(e[a]^e[l]);return s.join("")};let o=localStorage.getItem("__LS_PREFIX__")||"MOE_";const g=()=>void localStorage.clear(),u=r=>void localStorage.removeItem(`${o}${r}`),d=(r,n=!1)=>{const t=localStorage.getItem(`${o}${r}`);if(!t)return;const e=JSON.parse(t);if(e.expires&&e.expires<=Date.now()){u(`${o}${r}`);return}return e.encrypt&&(e.value===""||e.value===null||e.value===void 0||typeof e.value=="string"&&(e.value=i(e.value)),e.__isJson&&(e.value=JSON.parse(i(e.value)))),n?e:e.value},y=(r,n,t)=>{if(!r)throw new Error("缺少必要参数!");let e;const s={value:(()=>{if(n===""||n===null||n===void 0)return n;if(t!=null&&t.encrypt){if(typeof n=="string")return f(n);if(typeof n=="object")return e=!0,f(JSON.stringify(n))}return n})(),expires:t!=null&&t.expires?Date.now()+t.expires:0,encrypt:t==null?void 0:t.encrypt,__isJson:e};localStorage.setItem(`${o}${r}`,JSON.stringify(s))},S=r=>{if(r===o)return;const n=[];for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t),l=localStorage.getItem(e);if(e.startsWith(o)){const s=e.replace(new RegExp(`^${o}`),r);localStorage.setItem(s,l),n.push(e)}}o=r,localStorage.setItem("__LS_PREFIX__",r),n.forEach(t=>{localStorage.removeItem(t)})};return c.clear=g,c.decrypt=i,c.encrypt=f,c.get=d,c.remove=u,c.set=y,c.setPrefix=S,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c}({});
