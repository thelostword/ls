(function(s,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis<"u"?globalThis:s||self,i(s.$ls={}))})(this,function(s){"use strict";const i=r=>{if(typeof r!="string"||!r)throw new TypeError("Input must be a string and cannot be empty!");const n=Math.floor(Math.random()*256),t=r.length,e=new Uint16Array(t+1);for(let o=0;o<=t;o++)e[o]=r.charCodeAt(o)^n;e[t]=n;const c=new Uint8Array(e.buffer),l=String.fromCharCode(...c);return btoa(l)},f=r=>{if(typeof r!="string"||!r)throw new TypeError("Input must be a string and cannot be empty!");const n=atob(r),t=new Uint8Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charCodeAt(o);const e=new Uint16Array(t.buffer),c=e.length-1,l=new Array(c);for(let o=0;o<c;o++)l[o]=String.fromCharCode(e[o]^e[c]);return l.join("")};let a=localStorage.getItem("__LS_PREFIX__")||"MOE_";const d=()=>void localStorage.clear(),u=r=>{if(!r)throw new Error("Missing key!");localStorage.removeItem(`${a}${r}`)},g=(r,n)=>{if(!r)throw new Error("Missing key!");const t=localStorage.getItem(`${a}${r}`);if(!t)return;const e=JSON.parse(t);if(e.expires&&e.expires<=Date.now()){u(`${a}${r}`);return}return e.encrypt&&(e.value===""||e.value===null||e.value===void 0||typeof e.value=="string"&&(e.value=f(e.value)),e.__isJson&&(e.value=JSON.parse(f(e.value)))),typeof n=="function"?n(e):e.value},y=(r,n,t)=>{if(!r)throw new Error("Missing key!");let e;const l={value:(()=>{if(n===""||n===null||n===void 0)return n;if(t!=null&&t.encrypt){if(typeof n=="string")return i(n);if(typeof n=="object")return e=!0,i(JSON.stringify(n))}return n})(),expires:t!=null&&t.expires?Date.now()+t.expires:0,encrypt:t==null?void 0:t.encrypt,__isJson:e};localStorage.setItem(`${a}${r}`,JSON.stringify(l))},h=r=>{if(r===a)return;const n=[];for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t),c=localStorage.getItem(e);if(e.startsWith(a)){const l=e.replace(new RegExp(`^${a}`),r);localStorage.setItem(l,c),n.push(e)}}a=r,localStorage.setItem("__LS_PREFIX__",r),n.forEach(t=>{localStorage.removeItem(t)})};s.clear=d,s.decrypt=f,s.encrypt=i,s.get=g,s.remove=u,s.set=y,s.setPrefix=h,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
